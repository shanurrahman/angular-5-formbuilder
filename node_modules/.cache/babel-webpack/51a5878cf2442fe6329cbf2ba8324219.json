{"ast":null,"code":"import _toConsumableArray from \"/home/shanur/Documents/personal/angular-5-formbuilder/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _createClass from \"/home/shanur/Documents/personal/angular-5-formbuilder/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _classCallCheck from \"/home/shanur/Documents/personal/angular-5-formbuilder/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport { OverlayConfig, ConnectionPositionPair, Overlay, OverlayModule } from '@angular/cdk/overlay';\nimport { DOCUMENT, CommonModule } from '@angular/common';\nimport { Directive, Injectable, forwardRef, EventEmitter, ElementRef, Component, ChangeDetectionStrategy, Optional, Inject, ChangeDetectorRef, ViewContainerRef, Input, Output, ViewChild, TemplateRef, ContentChild, NgModule } from '@angular/core';\nimport { NG_VALUE_ACCESSOR, FormsModule } from '@angular/forms';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { Subject, merge, fromEvent } from 'rxjs';\nimport { __decorate, __metadata } from 'tslib';\nimport { ENTER, LEFT_ARROW, RIGHT_ARROW, TAB, ESCAPE, UP_ARROW, DOWN_ARROW } from '@angular/cdk/keycodes';\nimport { TemplatePortal } from '@angular/cdk/portal';\nimport { DEFAULT_MENTION_BOTTOM_POSITIONS, DEFAULT_MENTION_TOP_POSITIONS } from 'ng-zorro-antd/core/overlay';\nimport { getMentions as _getMentions, getCaretCoordinates, InputBoolean } from 'ng-zorro-antd/core/util';\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/cdk/overlay';\nimport * as ɵngcc2 from '@angular/common';\nimport * as ɵngcc3 from 'ng-zorro-antd/icon';\n\nfunction NzMentionComponent_ng_template_1_li_1_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n  }\n}\n\nvar _c0 = function _c0(a0) {\n  return {\n    $implicit: a0\n  };\n};\n\nfunction NzMentionComponent_ng_template_1_li_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NzMentionComponent_ng_template_1_li_1_ng_container_1_ng_container_1_Template, 1, 0, \"ng-container\", 7);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    var suggestion_r4 = ɵngcc0.ɵɵnextContext().$implicit;\n    var ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r6.suggestionTemplate)(\"ngTemplateOutletContext\", ɵngcc0.ɵɵpureFunction1(2, _c0, suggestion_r4));\n  }\n}\n\nfunction NzMentionComponent_ng_template_1_li_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    var suggestion_r4 = ɵngcc0.ɵɵnextContext().$implicit;\n    var ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r8.nzValueWith(suggestion_r4));\n  }\n}\n\nfunction NzMentionComponent_ng_template_1_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r13 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"li\", 4);\n    ɵngcc0.ɵɵlistener(\"mousedown\", function NzMentionComponent_ng_template_1_li_1_Template_li_mousedown_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r13);\n      return $event.preventDefault();\n    })(\"click\", function NzMentionComponent_ng_template_1_li_1_Template_li_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r13);\n      var suggestion_r4 = ctx.$implicit;\n      var ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r14.selectSuggestion(suggestion_r4);\n    });\n    ɵngcc0.ɵɵtemplate(1, NzMentionComponent_ng_template_1_li_1_ng_container_1_Template, 2, 4, \"ng-container\", 5);\n    ɵngcc0.ɵɵtemplate(2, NzMentionComponent_ng_template_1_li_1_ng_template_2_Template, 1, 1, \"ng-template\", null, 6, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var i_r5 = ctx.index;\n\n    var _r7 = ɵngcc0.ɵɵreference(3);\n\n    var ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵclassProp(\"focus\", i_r5 === ctx_r2.activeIndex);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.suggestionTemplate)(\"ngIfElse\", _r7);\n  }\n}\n\nfunction NzMentionComponent_ng_template_1_li_2_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵelement(1, \"i\", 10);\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nfunction NzMentionComponent_ng_template_1_li_2_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r16 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r16.nzNotFoundContent);\n  }\n}\n\nfunction NzMentionComponent_ng_template_1_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\", 8);\n    ɵngcc0.ɵɵtemplate(1, NzMentionComponent_ng_template_1_li_2_span_1_Template, 2, 0, \"span\", 9);\n    ɵngcc0.ɵɵtemplate(2, NzMentionComponent_ng_template_1_li_2_span_2_Template, 2, 1, \"span\", 9);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.nzLoading);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r3.nzLoading);\n  }\n}\n\nfunction NzMentionComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"ul\", 1);\n    ɵngcc0.ɵɵtemplate(1, NzMentionComponent_ng_template_1_li_1_Template, 4, 4, \"li\", 2);\n    ɵngcc0.ɵɵtemplate(2, NzMentionComponent_ng_template_1_li_2_Template, 3, 2, \"li\", 3);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r1.filteredSuggestions);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.filteredSuggestions.length === 0);\n  }\n}\n\nvar _c1 = [\"*\"];\n\nvar NzMentionSuggestionDirective = function NzMentionSuggestionDirective() {\n  _classCallCheck(this, NzMentionSuggestionDirective);\n};\n\nNzMentionSuggestionDirective.ɵfac = function NzMentionSuggestionDirective_Factory(t) {\n  return new (t || NzMentionSuggestionDirective)();\n};\n\nNzMentionSuggestionDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({\n  type: NzMentionSuggestionDirective,\n  selectors: [[\"\", \"nzMentionSuggestion\", \"\"]],\n  exportAs: [\"nzMentionSuggestion\"]\n});\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nvar NzMentionService = /*#__PURE__*/function () {\n  function NzMentionService() {\n    _classCallCheck(this, NzMentionService);\n\n    this.triggerChange$ = new Subject();\n  }\n\n  _createClass(NzMentionService, [{\n    key: \"triggerChanged\",\n    value: function triggerChanged() {\n      return this.triggerChange$.asObservable();\n    }\n  }, {\n    key: \"registerTrigger\",\n    value: function registerTrigger(trigger) {\n      if (this.trigger !== trigger) {\n        this.trigger = trigger;\n        this.triggerChange$.next(trigger);\n      }\n    }\n  }, {\n    key: \"ngOnDestroy\",\n    value: function ngOnDestroy() {\n      this.triggerChange$.complete();\n    }\n  }]);\n\n  return NzMentionService;\n}();\n\nNzMentionService.ɵfac = function NzMentionService_Factory(t) {\n  return new (t || NzMentionService)();\n};\n\nNzMentionService.ɵprov = ɵngcc0.ɵɵdefineInjectable({\n  token: NzMentionService,\n  factory: NzMentionService.ɵfac\n});\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nvar NZ_MENTION_TRIGGER_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(function () {\n    return NzMentionTriggerDirective;\n  }),\n  multi: true\n};\n\nvar NzMentionTriggerDirective = /*#__PURE__*/function () {\n  function NzMentionTriggerDirective(el, nzMentionService) {\n    _classCallCheck(this, NzMentionTriggerDirective);\n\n    this.el = el;\n    this.nzMentionService = nzMentionService;\n\n    this.onChange = function () {};\n\n    this.onTouched = function () {};\n\n    this.onFocusin = new EventEmitter();\n    this.onBlur = new EventEmitter();\n    this.onInput = new EventEmitter();\n    this.onKeydown = new EventEmitter();\n    this.onClick = new EventEmitter();\n  }\n\n  _createClass(NzMentionTriggerDirective, [{\n    key: \"completeEvents\",\n    value: function completeEvents() {\n      this.onFocusin.complete();\n      this.onBlur.complete();\n      this.onInput.complete();\n      this.onKeydown.complete();\n      this.onClick.complete();\n    }\n  }, {\n    key: \"focus\",\n    value: function focus(caretPos) {\n      this.el.nativeElement.focus();\n      this.el.nativeElement.setSelectionRange(caretPos, caretPos);\n    }\n  }, {\n    key: \"insertMention\",\n    value: function insertMention(mention) {\n      var value = this.el.nativeElement.value;\n      var insertValue = mention.mention.trim() + ' ';\n      var newValue = [value.slice(0, mention.startPos + 1), insertValue, value.slice(mention.endPos, value.length)].join('');\n      this.el.nativeElement.value = newValue;\n      this.focus(mention.startPos + insertValue.length + 1);\n      this.onChange(newValue);\n      this.value = newValue;\n    }\n  }, {\n    key: \"writeValue\",\n    value: function writeValue(value) {\n      this.value = value;\n\n      if (typeof value === 'string') {\n        this.el.nativeElement.value = value;\n      } else {\n        this.el.nativeElement.value = '';\n      }\n    }\n  }, {\n    key: \"registerOnChange\",\n    value: function registerOnChange(fn) {\n      this.onChange = fn;\n    }\n  }, {\n    key: \"registerOnTouched\",\n    value: function registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n  }, {\n    key: \"ngAfterViewInit\",\n    value: function ngAfterViewInit() {\n      this.nzMentionService.registerTrigger(this);\n    }\n  }, {\n    key: \"ngOnDestroy\",\n    value: function ngOnDestroy() {\n      this.completeEvents();\n    }\n  }]);\n\n  return NzMentionTriggerDirective;\n}();\n\nNzMentionTriggerDirective.ɵfac = function NzMentionTriggerDirective_Factory(t) {\n  return new (t || NzMentionTriggerDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NzMentionService));\n};\n\nNzMentionTriggerDirective.ɵdir = ɵngcc0.ɵɵdefineDirective({\n  type: NzMentionTriggerDirective,\n  selectors: [[\"input\", \"nzMentionTrigger\", \"\"], [\"textarea\", \"nzMentionTrigger\", \"\"]],\n  hostAttrs: [\"autocomplete\", \"off\"],\n  hostBindings: function NzMentionTriggerDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"focusin\", function NzMentionTriggerDirective_focusin_HostBindingHandler() {\n        return ctx.onFocusin.emit();\n      })(\"blur\", function NzMentionTriggerDirective_blur_HostBindingHandler() {\n        return ctx.onBlur.emit();\n      })(\"input\", function NzMentionTriggerDirective_input_HostBindingHandler($event) {\n        return ctx.onInput.emit($event);\n      })(\"keydown\", function NzMentionTriggerDirective_keydown_HostBindingHandler($event) {\n        return ctx.onKeydown.emit($event);\n      })(\"click\", function NzMentionTriggerDirective_click_HostBindingHandler($event) {\n        return ctx.onClick.emit($event);\n      });\n    }\n  },\n  exportAs: [\"nzMentionTrigger\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([NZ_MENTION_TRIGGER_ACCESSOR])]\n});\n\nNzMentionTriggerDirective.ctorParameters = function () {\n  return [{\n    type: ElementRef\n  }, {\n    type: NzMentionService\n  }];\n};\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nvar NzMentionComponent = /*#__PURE__*/function () {\n  function NzMentionComponent(ngDocument, cdr, overlay, viewContainerRef, nzMentionService) {\n    _classCallCheck(this, NzMentionComponent);\n\n    this.ngDocument = ngDocument;\n    this.cdr = cdr;\n    this.overlay = overlay;\n    this.viewContainerRef = viewContainerRef;\n    this.nzMentionService = nzMentionService;\n\n    this.nzValueWith = function (value) {\n      return value;\n    };\n\n    this.nzPrefix = '@';\n    this.nzLoading = false;\n    this.nzNotFoundContent = '无匹配结果，轻敲空格完成输入';\n    this.nzPlacement = 'bottom';\n    this.nzSuggestions = [];\n    this.nzOnSelect = new EventEmitter();\n    this.nzOnSearchChange = new EventEmitter();\n    this.isOpen = false;\n    this.filteredSuggestions = [];\n    this.suggestionTemplate = null;\n    this.activeIndex = -1;\n    this.previousValue = null;\n    this.cursorMention = null;\n    this.overlayRef = null;\n  }\n\n  _createClass(NzMentionComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var _this = this;\n\n      this.nzMentionService.triggerChanged().subscribe(function (trigger) {\n        _this.trigger = trigger;\n\n        _this.bindTriggerEvents();\n\n        _this.closeDropdown();\n\n        _this.overlayRef = null;\n      });\n    }\n  }, {\n    key: \"ngOnChanges\",\n    value: function ngOnChanges(changes) {\n      if (changes.hasOwnProperty('nzSuggestions')) {\n        if (this.isOpen) {\n          this.previousValue = null;\n          this.activeIndex = -1;\n          this.resetDropdown(false);\n        }\n      }\n    }\n  }, {\n    key: \"ngOnDestroy\",\n    value: function ngOnDestroy() {\n      this.closeDropdown();\n    }\n  }, {\n    key: \"closeDropdown\",\n    value: function closeDropdown() {\n      if (this.overlayRef && this.overlayRef.hasAttached()) {\n        this.overlayRef.detach();\n        this.overlayBackdropClickSubscription.unsubscribe();\n        this.isOpen = false;\n        this.cdr.markForCheck();\n      }\n    }\n  }, {\n    key: \"openDropdown\",\n    value: function openDropdown() {\n      this.attachOverlay();\n      this.isOpen = true;\n      this.cdr.markForCheck();\n    }\n  }, {\n    key: \"getMentions\",\n    value: function getMentions() {\n      return this.trigger ? _getMentions(this.trigger.value, this.nzPrefix) : [];\n    }\n  }, {\n    key: \"selectSuggestion\",\n    value: function selectSuggestion(suggestion) {\n      var value = this.nzValueWith(suggestion);\n      this.trigger.insertMention({\n        mention: value,\n        startPos: this.cursorMentionStart,\n        endPos: this.cursorMentionEnd\n      });\n      this.nzOnSelect.emit(suggestion);\n      this.closeDropdown();\n      this.activeIndex = -1;\n    }\n  }, {\n    key: \"handleInput\",\n    value: function handleInput(event) {\n      var target = event.target;\n      this.trigger.onChange(target.value);\n      this.trigger.value = target.value;\n      this.resetDropdown();\n    }\n  }, {\n    key: \"handleKeydown\",\n    value: function handleKeydown(event) {\n      var keyCode = event.keyCode;\n\n      if (this.isOpen && keyCode === ENTER && this.activeIndex !== -1 && this.filteredSuggestions.length) {\n        this.selectSuggestion(this.filteredSuggestions[this.activeIndex]);\n        event.preventDefault();\n      } else if (keyCode === LEFT_ARROW || keyCode === RIGHT_ARROW) {\n        this.resetDropdown();\n        event.stopPropagation();\n      } else {\n        if (this.isOpen && (keyCode === TAB || keyCode === ESCAPE)) {\n          this.closeDropdown();\n          return;\n        }\n\n        if (this.isOpen && keyCode === UP_ARROW) {\n          this.setPreviousItemActive();\n          event.preventDefault();\n          event.stopPropagation();\n        }\n\n        if (this.isOpen && keyCode === DOWN_ARROW) {\n          this.setNextItemActive();\n          event.preventDefault();\n          event.stopPropagation();\n        }\n      }\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick() {\n      this.resetDropdown();\n    }\n  }, {\n    key: \"bindTriggerEvents\",\n    value: function bindTriggerEvents() {\n      var _this2 = this;\n\n      this.trigger.onInput.subscribe(function (e) {\n        return _this2.handleInput(e);\n      });\n      this.trigger.onKeydown.subscribe(function (e) {\n        return _this2.handleKeydown(e);\n      });\n      this.trigger.onClick.subscribe(function () {\n        return _this2.handleClick();\n      });\n    }\n  }, {\n    key: \"suggestionsFilter\",\n    value: function suggestionsFilter(value, emit) {\n      var _this3 = this;\n\n      var suggestions = value.substring(1);\n      /**\n       * Should always emit (nzOnSearchChange) when value empty\n       *\n       * @[something]... @[empty]... @[empty]\n       *     ^             ^           ^\n       * preValue        preValue  (should emit)\n       */\n\n      if (this.previousValue === value && value !== this.cursorMention[0]) {\n        return;\n      }\n\n      this.previousValue = value;\n\n      if (emit) {\n        this.nzOnSearchChange.emit({\n          value: this.cursorMention.substring(1),\n          prefix: this.cursorMention[0]\n        });\n      }\n\n      var searchValue = suggestions.toLowerCase();\n      this.filteredSuggestions = this.nzSuggestions.filter(function (suggestion) {\n        return _this3.nzValueWith(suggestion).toLowerCase().includes(searchValue);\n      });\n    }\n  }, {\n    key: \"resetDropdown\",\n    value: function resetDropdown() {\n      var emit = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      this.resetCursorMention();\n\n      if (typeof this.cursorMention !== 'string' || !this.canOpen()) {\n        this.closeDropdown();\n        return;\n      }\n\n      this.suggestionsFilter(this.cursorMention, emit);\n      var activeIndex = this.filteredSuggestions.indexOf(this.cursorMention.substring(1));\n      this.activeIndex = activeIndex >= 0 ? activeIndex : 0;\n      this.openDropdown();\n    }\n  }, {\n    key: \"setNextItemActive\",\n    value: function setNextItemActive() {\n      this.activeIndex = this.activeIndex + 1 <= this.filteredSuggestions.length - 1 ? this.activeIndex + 1 : 0;\n      this.cdr.markForCheck();\n    }\n  }, {\n    key: \"setPreviousItemActive\",\n    value: function setPreviousItemActive() {\n      this.activeIndex = this.activeIndex - 1 < 0 ? this.filteredSuggestions.length - 1 : this.activeIndex - 1;\n      this.cdr.markForCheck();\n    }\n  }, {\n    key: \"canOpen\",\n    value: function canOpen() {\n      var element = this.triggerNativeElement;\n      return !element.readOnly && !element.disabled;\n    }\n  }, {\n    key: \"resetCursorMention\",\n    value: function resetCursorMention() {\n      var value = this.triggerNativeElement.value.replace(/[\\r\\n]/g, ' ') || '';\n      var selectionStart = this.triggerNativeElement.selectionStart;\n      var prefix = typeof this.nzPrefix === 'string' ? [this.nzPrefix] : this.nzPrefix;\n      var i = prefix.length;\n\n      while (i >= 0) {\n        var startPos = value.lastIndexOf(prefix[i], selectionStart);\n        var endPos = value.indexOf(' ', selectionStart) > -1 ? value.indexOf(' ', selectionStart) : value.length;\n        var mention = value.substring(startPos, endPos);\n\n        if (startPos > 0 && value[startPos - 1] !== ' ' || startPos < 0 || mention.includes(prefix[i], 1) || mention.includes(' ')) {\n          this.cursorMention = null;\n          this.cursorMentionStart = -1;\n          this.cursorMentionEnd = -1;\n        } else {\n          this.cursorMention = mention;\n          this.cursorMentionStart = startPos;\n          this.cursorMentionEnd = endPos;\n          return;\n        }\n\n        i--;\n      }\n    }\n  }, {\n    key: \"updatePositions\",\n    value: function updatePositions() {\n      var coordinates = getCaretCoordinates(this.triggerNativeElement, this.cursorMentionStart);\n      var top = coordinates.top - this.triggerNativeElement.getBoundingClientRect().height - this.triggerNativeElement.scrollTop + (this.nzPlacement === 'bottom' ? coordinates.height - 6 : -6);\n      var left = coordinates.left - this.triggerNativeElement.scrollLeft;\n      this.positionStrategy.withDefaultOffsetX(left).withDefaultOffsetY(top);\n\n      if (this.nzPlacement === 'bottom') {\n        this.positionStrategy.withPositions(_toConsumableArray(DEFAULT_MENTION_BOTTOM_POSITIONS));\n      }\n\n      if (this.nzPlacement === 'top') {\n        this.positionStrategy.withPositions(_toConsumableArray(DEFAULT_MENTION_TOP_POSITIONS));\n      }\n\n      this.positionStrategy.apply();\n    }\n  }, {\n    key: \"subscribeOverlayBackdropClick\",\n    value: function subscribeOverlayBackdropClick() {\n      var _this4 = this;\n\n      return merge(fromEvent(this.ngDocument, 'click'), fromEvent(this.ngDocument, 'touchend')).subscribe(function (event) {\n        var clickTarget = event.target;\n\n        if (_this4.isOpen && clickTarget !== _this4.trigger.el.nativeElement && !!_this4.overlayRef && !_this4.overlayRef.overlayElement.contains(clickTarget)) {\n          _this4.closeDropdown();\n        }\n      });\n    }\n  }, {\n    key: \"attachOverlay\",\n    value: function attachOverlay() {\n      if (!this.overlayRef) {\n        this.portal = new TemplatePortal(this.suggestionsTemp, this.viewContainerRef);\n        this.overlayRef = this.overlay.create(this.getOverlayConfig());\n      }\n\n      if (this.overlayRef && !this.overlayRef.hasAttached()) {\n        this.overlayRef.attach(this.portal);\n        this.overlayBackdropClickSubscription = this.subscribeOverlayBackdropClick();\n      }\n\n      this.updatePositions();\n    }\n  }, {\n    key: \"getOverlayConfig\",\n    value: function getOverlayConfig() {\n      return new OverlayConfig({\n        positionStrategy: this.getOverlayPosition(),\n        scrollStrategy: this.overlay.scrollStrategies.reposition(),\n        disposeOnNavigation: true\n      });\n    }\n  }, {\n    key: \"getOverlayPosition\",\n    value: function getOverlayPosition() {\n      var positions = [new ConnectionPositionPair({\n        originX: 'start',\n        originY: 'bottom'\n      }, {\n        overlayX: 'start',\n        overlayY: 'top'\n      }), new ConnectionPositionPair({\n        originX: 'start',\n        originY: 'top'\n      }, {\n        overlayX: 'start',\n        overlayY: 'bottom'\n      })];\n      this.positionStrategy = this.overlay.position().flexibleConnectedTo(this.trigger.el).withPositions(positions).withFlexibleDimensions(false).withPush(false);\n      return this.positionStrategy;\n    }\n  }, {\n    key: \"suggestionChild\",\n    set: function set(value) {\n      if (value) {\n        this.suggestionTemplate = value;\n      }\n    }\n  }, {\n    key: \"triggerNativeElement\",\n    get: function get() {\n      return this.trigger.el.nativeElement;\n    }\n  }]);\n\n  return NzMentionComponent;\n}();\n\nNzMentionComponent.ɵfac = function NzMentionComponent_Factory(t) {\n  return new (t || NzMentionComponent)(ɵngcc0.ɵɵdirectiveInject(DOCUMENT, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.Overlay), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(NzMentionService));\n};\n\nNzMentionComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n  type: NzMentionComponent,\n  selectors: [[\"nz-mention\"]],\n  contentQueries: function NzMentionComponent_ContentQueries(rf, ctx, dirIndex) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵcontentQuery(dirIndex, NzMentionSuggestionDirective, true, TemplateRef);\n    }\n\n    if (rf & 2) {\n      var _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.suggestionChild = _t.first);\n    }\n  },\n  viewQuery: function NzMentionComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵviewQuery(TemplateRef, true);\n    }\n\n    if (rf & 2) {\n      var _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.suggestionsTemp = _t.first);\n    }\n  },\n  inputs: {\n    nzValueWith: \"nzValueWith\",\n    nzPrefix: \"nzPrefix\",\n    nzLoading: \"nzLoading\",\n    nzNotFoundContent: \"nzNotFoundContent\",\n    nzPlacement: \"nzPlacement\",\n    nzSuggestions: \"nzSuggestions\"\n  },\n  outputs: {\n    nzOnSelect: \"nzOnSelect\",\n    nzOnSearchChange: \"nzOnSearchChange\"\n  },\n  exportAs: [\"nzMention\"],\n  features: [ɵngcc0.ɵɵProvidersFeature([NzMentionService]), ɵngcc0.ɵɵNgOnChangesFeature],\n  ngContentSelectors: _c1,\n  decls: 3,\n  vars: 0,\n  consts: [[\"suggestions\", \"\"], [1, \"ant-mention-dropdown\"], [\"class\", \"ant-mention-dropdown-item\", 3, \"focus\", \"mousedown\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"ant-mention-dropdown-notfound ant-mention-dropdown-item\", 4, \"ngIf\"], [1, \"ant-mention-dropdown-item\", 3, \"mousedown\", \"click\"], [4, \"ngIf\", \"ngIfElse\"], [\"defaultSuggestion\", \"\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [1, \"ant-mention-dropdown-notfound\", \"ant-mention-dropdown-item\"], [4, \"ngIf\"], [\"nz-icon\", \"\", \"nzType\", \"loading\"]],\n  template: function NzMentionComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵprojectionDef();\n      ɵngcc0.ɵɵprojection(0);\n      ɵngcc0.ɵɵtemplate(1, NzMentionComponent_ng_template_1_Template, 3, 2, \"ng-template\", null, 0, ɵngcc0.ɵɵtemplateRefExtractor);\n    }\n  },\n  directives: [ɵngcc2.NgForOf, ɵngcc2.NgIf, ɵngcc2.NgTemplateOutlet, ɵngcc3.NzIconDirective],\n  encapsulation: 2,\n  changeDetection: 0\n});\n\nNzMentionComponent.ctorParameters = function () {\n  return [{\n    type: undefined,\n    decorators: [{\n      type: Optional\n    }, {\n      type: Inject,\n      args: [DOCUMENT]\n    }]\n  }, {\n    type: ChangeDetectorRef\n  }, {\n    type: Overlay\n  }, {\n    type: ViewContainerRef\n  }, {\n    type: NzMentionService\n  }];\n};\n\nNzMentionComponent.propDecorators = {\n  nzValueWith: [{\n    type: Input\n  }],\n  nzPrefix: [{\n    type: Input\n  }],\n  nzLoading: [{\n    type: Input\n  }],\n  nzNotFoundContent: [{\n    type: Input\n  }],\n  nzPlacement: [{\n    type: Input\n  }],\n  nzSuggestions: [{\n    type: Input\n  }],\n  nzOnSelect: [{\n    type: Output\n  }],\n  nzOnSearchChange: [{\n    type: Output\n  }],\n  suggestionsTemp: [{\n    type: ViewChild,\n    args: [TemplateRef, {\n      static: false\n    }]\n  }],\n  suggestionChild: [{\n    type: ContentChild,\n    args: [NzMentionSuggestionDirective, {\n      static: false,\n      read: TemplateRef\n    }]\n  }]\n};\n\n__decorate([InputBoolean(), __metadata(\"design:type\", Object)], NzMentionComponent.prototype, \"nzLoading\", void 0);\n/*@__PURE__*/\n\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(NzMentionSuggestionDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[nzMentionSuggestion]',\n      exportAs: 'nzMentionSuggestion'\n    }]\n  }], null, null);\n})();\n/*@__PURE__*/\n\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(NzMentionService, [{\n    type: Injectable\n  }], function () {\n    return [];\n  }, null);\n})();\n/*@__PURE__*/\n\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(NzMentionTriggerDirective, [{\n    type: Directive,\n    args: [{\n      selector: 'input[nzMentionTrigger], textarea[nzMentionTrigger]',\n      exportAs: 'nzMentionTrigger',\n      providers: [NZ_MENTION_TRIGGER_ACCESSOR],\n      host: {\n        autocomplete: 'off',\n        '(focusin)': 'onFocusin.emit()',\n        '(blur)': 'onBlur.emit()',\n        '(input)': 'onInput.emit($event)',\n        '(keydown)': 'onKeydown.emit($event)',\n        '(click)': 'onClick.emit($event)'\n      }\n    }]\n  }], function () {\n    return [{\n      type: ɵngcc0.ElementRef\n    }, {\n      type: NzMentionService\n    }];\n  }, null);\n})();\n/*@__PURE__*/\n\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(NzMentionComponent, [{\n    type: Component,\n    args: [{\n      selector: 'nz-mention',\n      exportAs: 'nzMention',\n      template: \"\\n    <ng-content></ng-content>\\n    <ng-template #suggestions>\\n      <ul class=\\\"ant-mention-dropdown\\\">\\n        <li\\n          class=\\\"ant-mention-dropdown-item\\\"\\n          *ngFor=\\\"let suggestion of filteredSuggestions; let i = index\\\"\\n          [class.focus]=\\\"i === activeIndex\\\"\\n          (mousedown)=\\\"$event.preventDefault()\\\"\\n          (click)=\\\"selectSuggestion(suggestion)\\\"\\n        >\\n          <ng-container *ngIf=\\\"suggestionTemplate; else defaultSuggestion\\\">\\n            <ng-container *ngTemplateOutlet=\\\"suggestionTemplate; context: { $implicit: suggestion }\\\"></ng-container>\\n          </ng-container>\\n          <ng-template #defaultSuggestion>{{ nzValueWith(suggestion) }}</ng-template>\\n        </li>\\n        <li class=\\\"ant-mention-dropdown-notfound ant-mention-dropdown-item\\\" *ngIf=\\\"filteredSuggestions.length === 0\\\">\\n          <span *ngIf=\\\"nzLoading\\\"><i nz-icon nzType=\\\"loading\\\"></i></span>\\n          <span *ngIf=\\\"!nzLoading\\\">{{ nzNotFoundContent }}</span>\\n        </li>\\n      </ul>\\n    </ng-template>\\n  \",\n      preserveWhitespaces: false,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      providers: [NzMentionService]\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Optional\n      }, {\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }, {\n      type: ɵngcc0.ChangeDetectorRef\n    }, {\n      type: ɵngcc1.Overlay\n    }, {\n      type: ɵngcc0.ViewContainerRef\n    }, {\n      type: NzMentionService\n    }];\n  }, {\n    nzValueWith: [{\n      type: Input\n    }],\n    nzPrefix: [{\n      type: Input\n    }],\n    nzLoading: [{\n      type: Input\n    }],\n    nzNotFoundContent: [{\n      type: Input\n    }],\n    nzPlacement: [{\n      type: Input\n    }],\n    nzSuggestions: [{\n      type: Input\n    }],\n    nzOnSelect: [{\n      type: Output\n    }],\n    nzOnSearchChange: [{\n      type: Output\n    }],\n    suggestionChild: [{\n      type: ContentChild,\n      args: [NzMentionSuggestionDirective, {\n        static: false,\n        read: TemplateRef\n      }]\n    }],\n    suggestionsTemp: [{\n      type: ViewChild,\n      args: [TemplateRef, {\n        static: false\n      }]\n    }]\n  });\n})();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nvar COMPONENTS = [NzMentionComponent, NzMentionTriggerDirective, NzMentionSuggestionDirective];\n\nvar NzMentionModule = function NzMentionModule() {\n  _classCallCheck(this, NzMentionModule);\n};\n\nNzMentionModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({\n  type: NzMentionModule\n});\nNzMentionModule.ɵinj = ɵngcc0.ɵɵdefineInjector({\n  factory: function NzMentionModule_Factory(t) {\n    return new (t || NzMentionModule)();\n  },\n  imports: [[CommonModule, FormsModule, OverlayModule, NzIconModule]]\n});\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NzMentionModule, {\n    declarations: function declarations() {\n      return [NzMentionComponent, NzMentionTriggerDirective, NzMentionSuggestionDirective];\n    },\n    imports: function imports() {\n      return [CommonModule, FormsModule, OverlayModule, NzIconModule];\n    },\n    exports: function exports() {\n      return [NzMentionComponent, NzMentionTriggerDirective, NzMentionSuggestionDirective];\n    }\n  });\n})();\n/*@__PURE__*/\n\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(NzMentionModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, FormsModule, OverlayModule, NzIconModule],\n      declarations: [].concat(COMPONENTS),\n      exports: [].concat(COMPONENTS)\n    }]\n  }], null, null);\n})();\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { NZ_MENTION_TRIGGER_ACCESSOR, NzMentionComponent, NzMentionModule, NzMentionService, NzMentionSuggestionDirective, NzMentionTriggerDirective };","map":{"version":3,"sources":["../../components/mention/mention-suggestions.ts","../../components/mention/mention.service.ts","../../components/mention/mention-trigger.ts","../../components/mention/mention.component.ts","../../components/mention/mention.module.ts","../../components/mention/public-api.ts","../../components/mention/ng-zorro-antd-mention.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[nzMentionSuggestion]',\n  exportAs: 'nzMentionSuggestion'\n})\nexport class NzMentionSuggestionDirective {}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { Injectable, OnDestroy } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\n\nimport { NzMentionTriggerDirective } from './mention-trigger';\n\n@Injectable()\nexport class NzMentionService implements OnDestroy {\n  private trigger?: NzMentionTriggerDirective;\n  private triggerChange$ = new Subject<NzMentionTriggerDirective>();\n\n  triggerChanged(): Observable<NzMentionTriggerDirective> {\n    return this.triggerChange$.asObservable();\n  }\n\n  registerTrigger(trigger: NzMentionTriggerDirective): void {\n    if (this.trigger !== trigger) {\n      this.trigger = trigger;\n      this.triggerChange$.next(trigger);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.triggerChange$.complete();\n  }\n}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { AfterViewInit, Directive, ElementRef, EventEmitter, ExistingProvider, forwardRef, OnDestroy } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { OnChangeType, OnTouchedType } from 'ng-zorro-antd/core/types';\n\nimport { Mention } from './mention.component';\nimport { NzMentionService } from './mention.service';\n\nexport const NZ_MENTION_TRIGGER_ACCESSOR: ExistingProvider = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => NzMentionTriggerDirective),\n  multi: true\n};\n\n@Directive({\n  selector: 'input[nzMentionTrigger], textarea[nzMentionTrigger]',\n  exportAs: 'nzMentionTrigger',\n  providers: [NZ_MENTION_TRIGGER_ACCESSOR],\n  host: {\n    autocomplete: 'off',\n    '(focusin)': 'onFocusin.emit()',\n    '(blur)': 'onBlur.emit()',\n    '(input)': 'onInput.emit($event)',\n    '(keydown)': 'onKeydown.emit($event)',\n    '(click)': 'onClick.emit($event)'\n  }\n})\nexport class NzMentionTriggerDirective implements ControlValueAccessor, OnDestroy, AfterViewInit {\n  onChange: OnChangeType = () => {};\n  onTouched: OnTouchedType = () => {};\n\n  readonly onFocusin: EventEmitter<void> = new EventEmitter();\n  readonly onBlur: EventEmitter<void> = new EventEmitter();\n  readonly onInput: EventEmitter<KeyboardEvent> = new EventEmitter();\n  readonly onKeydown: EventEmitter<KeyboardEvent> = new EventEmitter();\n  readonly onClick: EventEmitter<MouseEvent> = new EventEmitter();\n  value?: string;\n\n  constructor(public el: ElementRef, private nzMentionService: NzMentionService) {}\n\n  completeEvents(): void {\n    this.onFocusin.complete();\n    this.onBlur.complete();\n    this.onInput.complete();\n    this.onKeydown.complete();\n    this.onClick.complete();\n  }\n\n  focus(caretPos?: number): void {\n    this.el.nativeElement.focus();\n    this.el.nativeElement.setSelectionRange(caretPos, caretPos);\n  }\n\n  insertMention(mention: Mention): void {\n    const value: string = this.el.nativeElement.value;\n    const insertValue = mention.mention.trim() + ' ';\n    const newValue = [value.slice(0, mention.startPos + 1), insertValue, value.slice(mention.endPos, value.length)].join('');\n    this.el.nativeElement.value = newValue;\n    this.focus(mention.startPos + insertValue.length + 1);\n    this.onChange(newValue);\n    this.value = newValue;\n  }\n\n  writeValue(value: string): void {\n    this.value = value;\n    if (typeof value === 'string') {\n      this.el.nativeElement.value = value;\n    } else {\n      this.el.nativeElement.value = '';\n    }\n  }\n\n  registerOnChange(fn: (value: string) => void): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  ngAfterViewInit(): void {\n    this.nzMentionService.registerTrigger(this);\n  }\n\n  ngOnDestroy(): void {\n    this.completeEvents();\n  }\n}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { DOWN_ARROW, ENTER, ESCAPE, LEFT_ARROW, RIGHT_ARROW, TAB, UP_ARROW } from '@angular/cdk/keycodes';\nimport {\n  ConnectionPositionPair,\n  FlexibleConnectedPositionStrategy,\n  Overlay,\n  OverlayConfig,\n  OverlayRef,\n  PositionStrategy\n} from '@angular/cdk/overlay';\nimport { TemplatePortal } from '@angular/cdk/portal';\n\nimport { DOCUMENT } from '@angular/common';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ContentChild,\n  EventEmitter,\n  Inject,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Optional,\n  Output,\n  SimpleChanges,\n  TemplateRef,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\nimport { DEFAULT_MENTION_BOTTOM_POSITIONS, DEFAULT_MENTION_TOP_POSITIONS } from 'ng-zorro-antd/core/overlay';\nimport { BooleanInput, NzSafeAny } from 'ng-zorro-antd/core/types';\nimport { getCaretCoordinates, getMentions, InputBoolean } from 'ng-zorro-antd/core/util';\n\nimport { fromEvent, merge, Subscription } from 'rxjs';\nimport { NzMentionSuggestionDirective } from './mention-suggestions';\nimport { NzMentionTriggerDirective } from './mention-trigger';\nimport { NzMentionService } from './mention.service';\n\nexport interface MentionOnSearchTypes {\n  value: string;\n  prefix: string;\n}\n\nexport interface Mention {\n  startPos: number;\n  endPos: number;\n  mention: string;\n}\n\nexport type MentionPlacement = 'top' | 'bottom';\n\n@Component({\n  selector: 'nz-mention',\n  exportAs: 'nzMention',\n  template: `\n    <ng-content></ng-content>\n    <ng-template #suggestions>\n      <ul class=\"ant-mention-dropdown\">\n        <li\n          class=\"ant-mention-dropdown-item\"\n          *ngFor=\"let suggestion of filteredSuggestions; let i = index\"\n          [class.focus]=\"i === activeIndex\"\n          (mousedown)=\"$event.preventDefault()\"\n          (click)=\"selectSuggestion(suggestion)\"\n        >\n          <ng-container *ngIf=\"suggestionTemplate; else defaultSuggestion\">\n            <ng-container *ngTemplateOutlet=\"suggestionTemplate; context: { $implicit: suggestion }\"></ng-container>\n          </ng-container>\n          <ng-template #defaultSuggestion>{{ nzValueWith(suggestion) }}</ng-template>\n        </li>\n        <li class=\"ant-mention-dropdown-notfound ant-mention-dropdown-item\" *ngIf=\"filteredSuggestions.length === 0\">\n          <span *ngIf=\"nzLoading\"><i nz-icon nzType=\"loading\"></i></span>\n          <span *ngIf=\"!nzLoading\">{{ nzNotFoundContent }}</span>\n        </li>\n      </ul>\n    </ng-template>\n  `,\n  preserveWhitespaces: false,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [NzMentionService]\n})\nexport class NzMentionComponent implements OnDestroy, OnInit, OnChanges {\n  static ngAcceptInputType_nzLoading: BooleanInput;\n\n  @Input() nzValueWith: (value: NzSafeAny) => string = value => value;\n  @Input() nzPrefix: string | string[] = '@';\n  @Input() @InputBoolean() nzLoading = false;\n  @Input() nzNotFoundContent: string = '无匹配结果，轻敲空格完成输入';\n  @Input() nzPlacement: MentionPlacement = 'bottom';\n  @Input() nzSuggestions: NzSafeAny[] = [];\n  @Output() readonly nzOnSelect: EventEmitter<NzSafeAny> = new EventEmitter();\n  @Output() readonly nzOnSearchChange: EventEmitter<MentionOnSearchTypes> = new EventEmitter();\n\n  trigger!: NzMentionTriggerDirective;\n  @ViewChild(TemplateRef, { static: false }) suggestionsTemp?: TemplateRef<void>;\n\n  @ContentChild(NzMentionSuggestionDirective, { static: false, read: TemplateRef })\n  set suggestionChild(value: TemplateRef<{ $implicit: NzSafeAny }>) {\n    if (value) {\n      this.suggestionTemplate = value;\n    }\n  }\n\n  isOpen = false;\n  filteredSuggestions: string[] = [];\n  suggestionTemplate: TemplateRef<{ $implicit: NzSafeAny }> | null = null;\n  activeIndex = -1;\n\n  private previousValue: string | null = null;\n  private cursorMention: string | null = null;\n  private cursorMentionStart?: number;\n  private cursorMentionEnd?: number;\n  private overlayRef: OverlayRef | null = null;\n  private portal?: TemplatePortal<void>;\n  private positionStrategy!: FlexibleConnectedPositionStrategy;\n  private overlayBackdropClickSubscription!: Subscription;\n\n  private get triggerNativeElement(): HTMLTextAreaElement | HTMLInputElement {\n    return this.trigger.el.nativeElement;\n  }\n\n  constructor(\n    @Optional() @Inject(DOCUMENT) private ngDocument: NzSafeAny,\n    private cdr: ChangeDetectorRef,\n    private overlay: Overlay,\n    private viewContainerRef: ViewContainerRef,\n    private nzMentionService: NzMentionService\n  ) {}\n\n  ngOnInit(): void {\n    this.nzMentionService.triggerChanged().subscribe(trigger => {\n      this.trigger = trigger;\n      this.bindTriggerEvents();\n      this.closeDropdown();\n      this.overlayRef = null;\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.hasOwnProperty('nzSuggestions')) {\n      if (this.isOpen) {\n        this.previousValue = null;\n        this.activeIndex = -1;\n        this.resetDropdown(false);\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.closeDropdown();\n  }\n\n  closeDropdown(): void {\n    if (this.overlayRef && this.overlayRef.hasAttached()) {\n      this.overlayRef.detach();\n      this.overlayBackdropClickSubscription.unsubscribe();\n      this.isOpen = false;\n      this.cdr.markForCheck();\n    }\n  }\n\n  openDropdown(): void {\n    this.attachOverlay();\n    this.isOpen = true;\n    this.cdr.markForCheck();\n  }\n\n  getMentions(): string[] {\n    return this.trigger ? getMentions(this.trigger.value!, this.nzPrefix) : [];\n  }\n\n  selectSuggestion(suggestion: string | {}): void {\n    const value = this.nzValueWith(suggestion);\n    this.trigger.insertMention({\n      mention: value,\n      startPos: this.cursorMentionStart!,\n      endPos: this.cursorMentionEnd!\n    });\n    this.nzOnSelect.emit(suggestion);\n    this.closeDropdown();\n    this.activeIndex = -1;\n  }\n\n  private handleInput(event: KeyboardEvent): void {\n    const target = event.target as HTMLInputElement | HTMLTextAreaElement;\n    this.trigger.onChange(target.value);\n    this.trigger.value = target.value;\n    this.resetDropdown();\n  }\n\n  private handleKeydown(event: KeyboardEvent): void {\n    const keyCode = event.keyCode;\n    if (this.isOpen && keyCode === ENTER && this.activeIndex !== -1 && this.filteredSuggestions.length) {\n      this.selectSuggestion(this.filteredSuggestions[this.activeIndex]);\n      event.preventDefault();\n    } else if (keyCode === LEFT_ARROW || keyCode === RIGHT_ARROW) {\n      this.resetDropdown();\n      event.stopPropagation();\n    } else {\n      if (this.isOpen && (keyCode === TAB || keyCode === ESCAPE)) {\n        this.closeDropdown();\n        return;\n      }\n\n      if (this.isOpen && keyCode === UP_ARROW) {\n        this.setPreviousItemActive();\n        event.preventDefault();\n        event.stopPropagation();\n      }\n\n      if (this.isOpen && keyCode === DOWN_ARROW) {\n        this.setNextItemActive();\n        event.preventDefault();\n        event.stopPropagation();\n      }\n    }\n  }\n\n  private handleClick(): void {\n    this.resetDropdown();\n  }\n\n  private bindTriggerEvents(): void {\n    this.trigger.onInput.subscribe((e: KeyboardEvent) => this.handleInput(e));\n    this.trigger.onKeydown.subscribe((e: KeyboardEvent) => this.handleKeydown(e));\n    this.trigger.onClick.subscribe(() => this.handleClick());\n  }\n\n  private suggestionsFilter(value: string, emit: boolean): void {\n    const suggestions = value.substring(1);\n    /**\n     * Should always emit (nzOnSearchChange) when value empty\n     *\n     * @[something]... @[empty]... @[empty]\n     *     ^             ^           ^\n     * preValue        preValue  (should emit)\n     */\n    if (this.previousValue === value && value !== this.cursorMention![0]) {\n      return;\n    }\n    this.previousValue = value;\n    if (emit) {\n      this.nzOnSearchChange.emit({\n        value: this.cursorMention!.substring(1),\n        prefix: this.cursorMention![0]\n      });\n    }\n    const searchValue = suggestions.toLowerCase();\n    this.filteredSuggestions = this.nzSuggestions.filter(suggestion => this.nzValueWith(suggestion).toLowerCase().includes(searchValue));\n  }\n\n  private resetDropdown(emit: boolean = true): void {\n    this.resetCursorMention();\n    if (typeof this.cursorMention !== 'string' || !this.canOpen()) {\n      this.closeDropdown();\n      return;\n    }\n    this.suggestionsFilter(this.cursorMention, emit);\n    const activeIndex = this.filteredSuggestions.indexOf(this.cursorMention.substring(1));\n    this.activeIndex = activeIndex >= 0 ? activeIndex : 0;\n    this.openDropdown();\n  }\n\n  private setNextItemActive(): void {\n    this.activeIndex = this.activeIndex + 1 <= this.filteredSuggestions.length - 1 ? this.activeIndex + 1 : 0;\n    this.cdr.markForCheck();\n  }\n\n  private setPreviousItemActive(): void {\n    this.activeIndex = this.activeIndex - 1 < 0 ? this.filteredSuggestions.length - 1 : this.activeIndex - 1;\n    this.cdr.markForCheck();\n  }\n\n  private canOpen(): boolean {\n    const element: HTMLInputElement | HTMLTextAreaElement = this.triggerNativeElement;\n    return !element.readOnly && !element.disabled;\n  }\n\n  private resetCursorMention(): void {\n    const value = this.triggerNativeElement.value.replace(/[\\r\\n]/g, ' ') || '';\n    const selectionStart = this.triggerNativeElement.selectionStart!;\n    const prefix = typeof this.nzPrefix === 'string' ? [this.nzPrefix] : this.nzPrefix;\n    let i = prefix.length;\n    while (i >= 0) {\n      const startPos = value.lastIndexOf(prefix[i], selectionStart);\n      const endPos = value.indexOf(' ', selectionStart) > -1 ? value.indexOf(' ', selectionStart) : value.length;\n      const mention = value.substring(startPos, endPos);\n      if ((startPos > 0 && value[startPos - 1] !== ' ') || startPos < 0 || mention.includes(prefix[i], 1) || mention.includes(' ')) {\n        this.cursorMention = null;\n        this.cursorMentionStart = -1;\n        this.cursorMentionEnd = -1;\n      } else {\n        this.cursorMention = mention;\n        this.cursorMentionStart = startPos;\n        this.cursorMentionEnd = endPos;\n        return;\n      }\n      i--;\n    }\n  }\n\n  private updatePositions(): void {\n    const coordinates = getCaretCoordinates(this.triggerNativeElement, this.cursorMentionStart!);\n    const top =\n      coordinates.top -\n      this.triggerNativeElement.getBoundingClientRect().height -\n      this.triggerNativeElement.scrollTop +\n      (this.nzPlacement === 'bottom' ? coordinates.height - 6 : -6);\n    const left = coordinates.left - this.triggerNativeElement.scrollLeft;\n    this.positionStrategy.withDefaultOffsetX(left).withDefaultOffsetY(top);\n    if (this.nzPlacement === 'bottom') {\n      this.positionStrategy.withPositions([...DEFAULT_MENTION_BOTTOM_POSITIONS]);\n    }\n    if (this.nzPlacement === 'top') {\n      this.positionStrategy.withPositions([...DEFAULT_MENTION_TOP_POSITIONS]);\n    }\n    this.positionStrategy.apply();\n  }\n\n  private subscribeOverlayBackdropClick(): Subscription {\n    return merge<MouseEvent | TouchEvent>(\n      fromEvent<MouseEvent>(this.ngDocument, 'click'),\n      fromEvent<TouchEvent>(this.ngDocument, 'touchend')\n    ).subscribe((event: MouseEvent | TouchEvent) => {\n      const clickTarget = event.target as HTMLElement;\n      if (\n        this.isOpen &&\n        clickTarget !== this.trigger.el.nativeElement &&\n        !!this.overlayRef &&\n        !this.overlayRef.overlayElement.contains(clickTarget)\n      ) {\n        this.closeDropdown();\n      }\n    });\n  }\n\n  private attachOverlay(): void {\n    if (!this.overlayRef) {\n      this.portal = new TemplatePortal(this.suggestionsTemp!, this.viewContainerRef);\n      this.overlayRef = this.overlay.create(this.getOverlayConfig());\n    }\n    if (this.overlayRef && !this.overlayRef.hasAttached()) {\n      this.overlayRef.attach(this.portal);\n      this.overlayBackdropClickSubscription = this.subscribeOverlayBackdropClick();\n    }\n    this.updatePositions();\n  }\n\n  private getOverlayConfig(): OverlayConfig {\n    return new OverlayConfig({\n      positionStrategy: this.getOverlayPosition(),\n      scrollStrategy: this.overlay.scrollStrategies.reposition(),\n      disposeOnNavigation: true\n    });\n  }\n\n  private getOverlayPosition(): PositionStrategy {\n    const positions = [\n      new ConnectionPositionPair({ originX: 'start', originY: 'bottom' }, { overlayX: 'start', overlayY: 'top' }),\n      new ConnectionPositionPair({ originX: 'start', originY: 'top' }, { overlayX: 'start', overlayY: 'bottom' })\n    ];\n    this.positionStrategy = this.overlay\n      .position()\n      .flexibleConnectedTo(this.trigger.el)\n      .withPositions(positions)\n      .withFlexibleDimensions(false)\n      .withPush(false);\n    return this.positionStrategy;\n  }\n}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nimport { OverlayModule } from '@angular/cdk/overlay';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzMentionSuggestionDirective } from './mention-suggestions';\nimport { NzMentionTriggerDirective } from './mention-trigger';\nimport { NzMentionComponent } from './mention.component';\n\nconst COMPONENTS = [NzMentionComponent, NzMentionTriggerDirective, NzMentionSuggestionDirective];\n\n@NgModule({\n  imports: [CommonModule, FormsModule, OverlayModule, NzIconModule],\n  declarations: [...COMPONENTS],\n  exports: [...COMPONENTS]\n})\nexport class NzMentionModule {}\n","/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nexport * from './mention.module';\nexport * from './mention.component';\nexport * from './mention-trigger';\nexport * from './mention-suggestions';\nexport * from './mention.service';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"]},"metadata":{},"sourceType":"module"}